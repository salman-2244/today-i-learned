(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(4),r=a.n(l),o=(a(16),a(6));var s=Object(o.a)("https://gzbqsdmcvkecwfeqalea.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd6YnFzZG1jdmtlY3dmZXFhbGVhIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTg4Mzk3NDksImV4cCI6MjAxNDQxNTc0OX0._uvDArQqREH6GHjp2ZrnnhCL_eqyFFDAlbmXiKUEV80");function m(){return c.a.createElement("p",{className:"message"},"Loading...")}function i(e){let{showF:t,showFF:a}=e;return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{src:"logo.png",alt:"Logo",width:"68",height:"68"}),c.a.createElement("h1",null,"Today I Learned")),c.a.createElement("button",{className:"btn btn-large btn-open",onClick:()=>a(e=>!e)},t?"Close":"Share a Fact"))}const u=[{name:"technology",color:"#3b82f6"},{name:"science",color:"#16a34a"},{name:"finance",color:"#ef4444"},{name:"society",color:"#eab308"},{name:"entertainment",color:"#db2777"},{name:"health",color:"#14b8a6"},{name:"history",color:"#f97316"},{name:"news",color:"#8b5cf6"}];function d(e){let{setFacts:t,showFF:a}=e;const[l,r]=Object(n.useState)(""),[o,m]=Object(n.useState)(""),[i,d]=Object(n.useState)(""),[b,g]=Object(n.useState)(!1);var E=l.length;return c.a.createElement("form",{className:"fact-form",onSubmit:async function(e){if(e.preventDefault(),l&&function(e){let t;try{t=new URL(e)}catch(a){return!1}return"http:"===t.protocol||"https:"===t.protocol}(o)&&i&&E<=200){g(!0);const{data:e,error:n}=await s.from("facts").insert([{text:l,source:o,category:i}]).select();g(!1),n||t(t=>[e[0],...t]),r(""),m(""),d(""),E=0,a(!1)}}},c.a.createElement("input",{type:"text",placeholder:"share a fact with the world",value:l,onChange:e=>r(e.target.value),disabled:b}),c.a.createElement("span",null,200-E),c.a.createElement("input",{type:"text",placeholder:"Trustworthy source",value:o,onChange:e=>m(e.target.value),disabled:b}),c.a.createElement("select",{value:i,onChange:e=>d(e.target.value),disabled:b},c.a.createElement("option",{value:""},"Choose a Category"),u.map(e=>c.a.createElement("option",{key:e.name,value:e.name},e.name.toUpperCase()))),c.a.createElement("button",{className:"btn btn-large",disabled:b},"Post"))}function b(e){let{facts:t,setFacts:a}=e;return 0===t.length?c.a.createElement("p",{className:"message"},"No facts for this category yet! Create the first one !!"):c.a.createElement("section",null,c.a.createElement("ul",{className:"fact-list"},t.map(e=>c.a.createElement(g,{key:e.id,fact:e,setFacts:a})),c.a.createElement("p",null,"There are total ",t.length," facts in our Database")))}function g(e){let{fact:t,setFacts:a}=e;const[l,r]=Object(n.useState)(!1),o=t.votesInteresting+t.votesMindblowing<t.votesFalse;async function m(e){r(!0);const{data:n,error:c}=await s.from("facts").update({[e]:t[e]+1}).eq("id",t.id).select();if(r(!1),!c)return a(e=>e.map(e=>e.id===t.id?n[0]:e))}return c.a.createElement("li",{key:t.id,className:"fact"},c.a.createElement("p",null,o?c.a.createElement("span",{className:"disputed"},"[\u26d4\ufe0fDISPUTED]"):null,t.text,c.a.createElement("a",{className:"source",href:t.source,target:"_blank"},"(Source)")),c.a.createElement("span",{className:"tag",style:{backgroundColor:u.find(e=>e.name===t.category).color}},t.category),c.a.createElement("div",{className:"vote-buttons"},c.a.createElement("button",{onClick:()=>m("votesInteresting"),disabled:l},"\ud83d\udc4d ",t.votesInteresting),c.a.createElement("button",{onClick:()=>m("votesMindblowing"),disabled:l},"\ud83e\udd2f ",t.votesMindblowing),c.a.createElement("button",{onClick:()=>m("votesFalse"),disabled:l},"\u26d4\ufe0f ",t.votesFalse)))}function E(e){let{currentCategory:t,setCurrentCategory:a}=e;return c.a.createElement("aside",null,c.a.createElement("ul",null,c.a.createElement("li",{className:"category"},c.a.createElement("button",{className:"btn btn-all-categories",onClick:()=>a("all")},"All")),u.map(e=>c.a.createElement("li",{key:e.name,className:"category"},c.a.createElement("button",{className:"btn btn-category",onClick:()=>a(e.name),style:{backgroundColor:e.color}},e.name)))))}var f=function(){const[e,t]=Object(n.useState)(!1),[a,l]=Object(n.useState)([]),[r,o]=Object(n.useState)(!1),[u,g]=Object(n.useState)("all");return Object(n.useEffect)(function(){!async function(){o(!0);let e=s.from("facts").select("*");"all"!==u&&(e=e.eq("category",u));const{data:t,error:a}=await e.order("votesInteresting",{ascending:!1}).limit(1e3);a?alert("There is a problem with loading the data"):l(t),o(!1)}()},[u]),c.a.createElement(c.a.Fragment,null,c.a.createElement(i,{showF:e,showFF:t}),e?c.a.createElement(d,{setFacts:l,showFF:t}):null,c.a.createElement("main",{className:"main"},c.a.createElement(E,{currentCategory:u,setCurrentCategory:g}),r?c.a.createElement(m,null):c.a.createElement(b,{facts:a,setFacts:l})))};r.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(f,null)))},7:function(e,t,a){e.exports=a(20)}},[[7,1,2]]]);
//# sourceMappingURL=main.badd3937.chunk.js.map